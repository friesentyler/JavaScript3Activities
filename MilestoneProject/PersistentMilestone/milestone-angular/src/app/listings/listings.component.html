<p>Listings works!</p>

<div *ngIf="listings">
  <h2>Listings</h2>
  <ul>
    <li *ngFor="let listing of listings" (click)="onSelectListing(listing)">
      Artist: {{ listing.artist }} - Album Title: {{ listing.albumTitle }}
      <button *ngIf="listing.listingId" (click)="onDeleteListing(listing.listingId!.toString())"
        class="btn btn-danger btn-sm">Delete</button>
    </li>
  </ul>

  <!-- Selected Listing Details -->
  <div *ngIf="selectedListing">
    <h3>Selected Listing Details</h3>
    <p>Listing ID: {{ selectedListing.listingId }}</p>
    <p>User ID: {{ selectedListing.listerId }}</p>
    <p>Artist: {{ selectedListing.artist }}</p>
    <p>Album Title: {{ selectedListing.albumTitle }}</p>
    <p>Condition: {{ selectedListing.condition }}</p>
    <img [src]="selectedListing.imageUrl" alt="Album Cover" width="200">

    <!-- Update Listing Form -->
    <h4>Update Listing</h4>
    <form (ngSubmit)="onUpdateListing()" class="needs-validation" novalidate>
      <div class="form-group mb-3">
        <label for="updateArtist" class="form-label">Artist:</label>
        <input id="updateArtist" [(ngModel)]="selectedListing.artist" name="artist" class="form-control" required>
        <div class="invalid-feedback">Artist is required.</div>
      </div>

      <div class="form-group mb-3">
        <label for="updateAlbumTitle" class="form-label">Album Title:</label>
        <input id="updateAlbumTitle" [(ngModel)]="selectedListing.albumTitle" name="albumTitle" class="form-control"
          required>
        <div class="invalid-feedback">Album Title is required.</div>
      </div>

      <div class="form-group mb-3">
        <label for="updateCondition" class="form-label">Condition:</label>
        <input id="updateCondition" [(ngModel)]="selectedListing.condition" name="condition" class="form-control"
          required>
        <div class="invalid-feedback">Condition is required.</div>
      </div>

      <div class="form-group mb-3">
        <label for="updateImageUrl" class="form-label">Image URL:</label>
        <input id="updateImageUrl" [(ngModel)]="selectedListing.imageUrl" name="imageUrl" class="form-control" required>
        <div class="invalid-feedback">Image URL is required.</div>
      </div>

      <button type="submit" class="btn btn-primary">Update Listing</button>
    </form>
  </div>
</div>

<div *ngIf="!listings">
  <p>No listings available</p>
</div>

<!-- Add Listing Form -->
<h3 class="mb-4">Add New Listing</h3>
<form (ngSubmit)="onAddListing()" class="needs-validation" novalidate>
  <div class="form-group mb-3">
    <label for="artist" class="form-label">Artist:</label>
    <input id="artist" [(ngModel)]="newListing.artist" name="artist" class="form-control" required>
    <div class="invalid-feedback">Artist is required.</div>
  </div>

  <div class="form-group mb-3">
    <label for="albumTitle" class="form-label">Album Title:</label>
    <input id="albumTitle" [(ngModel)]="newListing.albumTitle" name="albumTitle" class="form-control" required>
    <div class="invalid-feedback">Album Title is required.</div>
  </div>

  <div class="form-group mb-3">
    <label for="condition" class="form-label">Condition:</label>
    <input id="condition" [(ngModel)]="newListing.condition" name="condition" class="form-control" required>
    <div class="invalid-feedback">Condition is required.</div>
  </div>

  <div class="form-group mb-3">
    <label for="imageUrl" class="form-label">Image URL:</label>
    <input id="imageUrl" [(ngModel)]="newListing.imageUrl" name="imageUrl" class="form-control" required>
    <div class="invalid-feedback">Image URL is required.</div>
  </div>

  <div class="form-group mb-3">
    <label for="listerId" class="form-label">Lister ID:</label>
    <input id="listerId" [(ngModel)]="newListing.listerId" name="listerId" class="form-control" required>
    <div class="invalid-feedback">Lister ID is required.</div>
  </div>

  <button type="submit" class="btn btn-primary">Add Listing</button>
</form>
